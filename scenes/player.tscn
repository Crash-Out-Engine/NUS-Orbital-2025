[gd_scene load_steps=10 format=3 uid="uid://ytw0s5xnqwvt"]

[ext_resource type="Script" uid="uid://c8f8kowfp34yp" path="res://scripts/player.gd" id="1_3vyb7"]
[ext_resource type="Script" uid="uid://cndl5nak0qpxp" path="res://scripts/components/effectable/movement.gd" id="2_g2els"]
[ext_resource type="Script" uid="uid://bg2iinlcp53aa" path="res://scripts/components/effectable/health.gd" id="3_qhqgy"]
[ext_resource type="Script" uid="uid://wwqkkrfhwiyn" path="res://scripts/components/hitbox.gd" id="4_dqkch"]
[ext_resource type="Script" uid="uid://bqsxrr4x407ln" path="res://scripts/components/ranged.gd" id="5_qlg0r"]
[ext_resource type="Script" uid="uid://cwdm3dvyba0l3" path="res://scripts/components/effectable/ranged_cooldown.gd" id="6_tuyoq"]
[ext_resource type="Script" uid="uid://bwysxkiq506ps" path="res://scripts/components/effectable/target_priority.gd" id="7_fjrip"]
[ext_resource type="Script" uid="uid://b2im78b7p3db5" path="res://scripts/effect_mod_preset.gd" id="7_ur7pv"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_g2els"]
radius = 18.2857
height = 53.4112

[node name="Player" type="CharacterBody2D" groups=["allies"]]
script = ExtResource("1_3vyb7")

[node name="Polygon2D2" type="Polygon2D" parent="."]
position = Vector2(-13.2944, 0)
scale = Vector2(0.547556, 0.556367)
color = Color(0.349056, 0.447572, 0.506568, 1)
antialiased = true
polygon = PackedVector2Array(32, -8, 120, -16, 120, 16, 32, 8)

[node name="Polygon2D" type="Polygon2D" parent="."]
position = Vector2(-13.2944, -4.38094e-06)
scale = Vector2(2.81601, 4.38139)
color = Color(0.0463088, 0.326656, 0.210825, 1)
antialiased = true
polygon = PackedVector2Array(-9.4835, -6.09524, -9.4835, 6.09524, 9.48351, 3.04762, 9.48351, -3.04762)
uv = PackedVector2Array(-40, -39, -42, 102, 174, 75, 178, -13)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-13.2944, -5.68434e-14)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_g2els")

[node name="Barrel" type="Node2D" parent="."]
position = Vector2(48, 0)
scale = Vector2(0.556367, 0.556367)

[node name="Movement" type="Node" parent="."]
script = ExtResource("2_g2els")
lerp_weight = 0.9
is_player = true

[node name="Health" type="Node" parent="."]
script = ExtResource("3_qhqgy")
health_capacity = 50.0

[node name="Hitbox" type="Node" parent="."]
script = ExtResource("4_dqkch")
metadata/_custom_type_script = "uid://wwqkkrfhwiyn"

[node name="Ranged" type="Node2D" parent="." node_paths=PackedStringArray("ranged_cooldown", "barrel", "target_priority", "effect_mods")]
script = ExtResource("5_qlg0r")
ranged_cooldown = NodePath("../RangedCooldown")
barrel = NodePath("../Barrel")
aim_at_mouse = true
target_priority = NodePath("../TargetPriority")
effect_mods = [NodePath("EffectModPreset")]
metadata/_custom_type_script = "uid://bqsxrr4x407ln"

[node name="EffectModPreset" type="Node" parent="Ranged"]
script = ExtResource("7_ur7pv")
mod_name = "base damage"
metadata/_custom_type_script = "uid://b2im78b7p3db5"

[node name="RangedCooldown" type="Node" parent="."]
script = ExtResource("6_tuyoq")
ranged_cooldown = 0.1

[node name="TargetPriority" type="Node" parent="."]
script = ExtResource("7_fjrip")
initial_priority = 2.0
team = "allies"

[connection signal="just_changed" from="Health" to="." method="_on_health_just_changed"]
[connection signal="just_emptied" from="Health" to="." method="_on_health_just_emptied"]
